@if (isVisible) {
  <div class="modal-overlay">
    <!-- Background overlay -->
    <div class="modal-backdrop" (click)="closeModal()"></div>

    <div class="modal-container mat-elevation-z24">
      <mat-card class="modal-card">
        <mat-card-header>
          <mat-card-title>Your Account</mat-card-title>
          <button mat-icon-button class="close-btn" (click)="closeModal()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-card-header>

        <mat-card-content>
          <mat-tab-group
            [selectedIndex]="activeTab === 'login' ? 0 : 1"
            (selectedIndexChange)="switchTab($event === 0 ? 'login' : 'register')"
          >
            <mat-tab label="Login">
              <form [formGroup]="loginForm" (ngSubmit)="submitLogin()">
                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Email</mat-label>
                  <input
                    matInput
                    type="email"
                    formControlName="email"
                    placeholder="Enter Email"
                    required
                  />
                  <mat-error *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
                    Please enter a valid email
                  </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Password</mat-label>
                  <input
                    matInput
                    type="password"
                    formControlName="password"
                    placeholder="Password"
                    required
                  />
                  <mat-error *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
                    Password is required
                  </mat-error>
                </mat-form-field>

                <button mat-raised-button color="primary" class="full-width" type="submit">
                  Submit
                </button>
              </form>
            </mat-tab>

            <mat-tab label="Register">
              <form [formGroup]="registerForm" (ngSubmit)="submitRegister()">
                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Name</mat-label>
                  <input
                    matInput
                    type="text"
                    formControlName="name"
                    placeholder="Enter Name"
                    required
                  />
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Email</mat-label>
                  <input
                    matInput
                    type="email"
                    formControlName="email"
                    placeholder="Enter Email"
                    required
                  />
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Age</mat-label>
                  <input matInput type="number" formControlName="age" min="0" />
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Password</mat-label>
                  <input
                    matInput
                    type="password"
                    formControlName="password"
                    placeholder="Password"
                    required
                  />
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Confirm Password</mat-label>
                  <input
                    matInput
                    type="password"
                    formControlName="confirmPassword"
                    placeholder="Confirm Password"
                    required
                  />
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Phone Number</mat-label>
                  <input
                    matInput
                    type="tel"
                    formControlName="phone"
                    placeholder="Enter Phone Number"
                  />
                </mat-form-field>

                <button mat-raised-button color="primary" class="full-width" type="submit">
                  Submit
                </button>
              </form>
            </mat-tab>
          </mat-tab-group>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
}
